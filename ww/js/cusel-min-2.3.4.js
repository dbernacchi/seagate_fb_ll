function cuSel(a){jQuery(document).ready(function(){jQuery(a.changedEl).each(function(k){var m=jQuery(this),j=m.outerWidth(),q=m.prop("class"),A=m.prop("id"),x=m.prop("name"),v=m.val(),g=m.find("option[value='"+v+"']").eq(0),t=g.text(),r=m.prop("disabled"),w=a.scrollArrows,l=m.prop("onchange"),y=m.prop("tabindex"),s=m.prop("multiple");if(!A||s){return false}if(!r){classDisCuselText="",classDisCusel=""}else{classDisCuselText="classDisCuselLabel";classDisCusel="classDisCusel"}if(w){classDisCusel+=" cuselScrollArrows"}g.addClass("cuselActive");var p=m.html(),n=p.replace(/option/ig,"span");n=n.replace(/value=/ig,"val=");if(a.checkZIndex){k=jQuery(".cusel").length}var u='<div class="cusel '+q+" "+classDisCusel+'" id=cuselFrame-'+A+' style="width:'+j+'px" tabindex="'+y+'"><div class="cuselFrameRight"></div><div class="cuselText">'+t+'</div><div class="cusel-scroll-wrap"><div class="cusel-scroll-pane" id="cusel-scroll-'+A+'">'+n+'</div></div><input type="hidden" id="'+A+'" name="'+x+'" value="'+v+'" /></div>';m.replaceWith(u);if(l){jQuery("#"+A).bind("change",l)}var o=jQuery("#cuselFrame-"+A),f=o.find("span"),h;if(!f.eq(0).text()){h=f.eq(1).outerHeight();f.eq(0).css("height",f.eq(1).height())}else{h=f.eq(0).outerHeight()}if(f.length>a.visRows){o.find(".cusel-scroll-wrap").eq(0).css({height:h*a.visRows+"px",display:"none",visibility:"visible"}).children(".cusel-scroll-pane").css("height",h*a.visRows+"px")}else{o.find(".cusel-scroll-wrap").eq(0).css({display:"none",visibility:"visible"})}var z=jQuery("#cusel-scroll-"+A).find("span[addTags]"),i=z.length;for(d=0;d<i;d++){z.eq(d).append(z.eq(d).attr("addTags")).removeAttr("addTags")}});jQuery("html").unbind("click");jQuery("html").click(function(i){var g=jQuery(i.target),l=g.attr("id"),k=g.prop("class");if((k.indexOf("cuselText")!=-1||k.indexOf("cuselFrameRight")!=-1)&&g.parent().prop("class").indexOf("classDisCusel")==-1){var h=g.parent().find(".cusel-scroll-wrap").eq(0);if(h.css("display")=="none"){jQuery(".cusel-scroll-wrap").css("display","none");h.css("display","block");var j=false;if(g.parents(".cusel").prop("class").indexOf("cuselScrollArrows")!=-1){j=true}if(!h.find(".jScrollPaneContainer").eq(0).is("div")){h.find("div").eq(0).jScrollPaneCusel({showArrows:j})}}else{h.css("display","none")}}else{if(k.indexOf("cusel")!=-1&&k.indexOf("classDisCusel")==-1&&k.indexOf("cuselActive")==-1){var h=g.find(".cusel-scroll-wrap").eq(0);if(h.css("display")=="none"){jQuery(".cusel-scroll-wrap").css("display","none");h.css("display","block");var j=false;if(g.prop("class").indexOf("cuselScrollArrows")!=-1){j=true}if(!h.find(".jScrollPaneContainer").eq(0).is("div")){h.find("div").eq(0).jScrollPaneCusel({showArrows:j})}}else{h.css("display","none")}}else{if(g.is("span")&&g.parents(".cusel-scroll-wrap").is("div")){var f;(g.attr("val")==undefined)?f=g.text():f=g.attr("val");g.parents(".cusel-scroll-wrap").find(".cuselActive").eq(0).removeClass("cuselActive").end().parents(".cusel-scroll-wrap").next().val(f).end().prev().text(g.text()).end().css("display","none");g.addClass("cuselActive");if(k.indexOf("cuselActive")==-1){g.parents(".cusel").find(".cusel-scroll-wrap").eq(0).next("input").change()}}else{if(g.parents(".cusel-scroll-wrap").is("div")){return}else{jQuery(".cusel-scroll-wrap").css("display","none")}}}}});jQuery(".cusel").focus(function(){jQuery(this).addClass("cuselFocus")});jQuery(".cusel").blur(function(){jQuery(this).removeClass("cuselFocus")});jQuery(".cusel").hover(function(){jQuery(this).addClass("cuselFocus")},function(){jQuery(this).removeClass("cuselFocus")});jQuery(".cusel").unbind("keydown");jQuery(".cusel").keydown(function(h){var o,q;if(window.event){o=window.event.keyCode}else{if(h){o=h.which}}if(o==null||o==0||o==9){return true}if(jQuery(this).prop("class").indexOf("classDisCusel")!=-1){return false}if(o==40){var i=jQuery(this).find(".cuselOptHover").eq(0);if(!i.is("span")){var p=jQuery(this).find(".cuselActive").eq(0)}else{var p=i}var l=p.next();if(l.is("span")){jQuery(this).find(".cuselText").eq(0).text(l.text());p.removeClass("cuselOptHover");l.addClass("cuselOptHover");var k=jQuery(this).find(".cusel-scroll-pane").eq(0);if(k.parent().find(".jScrollPaneTrack").eq(0).is("div")){var m=k.prop("id"),j=k.find("span").eq(0).outerHeight();jQuery("#"+m)[0].scrollBy(j)}return false}else{return false}}if(o==38){var i=jQuery(this).find(".cuselOptHover").eq(0);if(!i.is("span")){var p=jQuery(this).find(".cuselActive").eq(0)}else{var p=i}cuselActivePrev=p.prev();if(cuselActivePrev.is("span")){jQuery(this).find(".cuselText").eq(0).text(cuselActivePrev.text());p.removeClass("cuselOptHover");cuselActivePrev.addClass("cuselOptHover");var k=jQuery(this).find(".cusel-scroll-pane").eq(0);if(k.parent().find(".jScrollPaneTrack").eq(0).is("div")){var m=k.prop("id"),j=-parseInt(k.find("span").eq(0).outerHeight());jQuery("#"+m)[0].scrollBy(j)}return false}else{return false}}if(o==27){var g=jQuery(this).find(".cuselActive").eq(0).text();jQuery(this).find(".cusel-scroll-wrap").eq(0).css("display","none").end().find(".cuselOptHover").eq(0).removeClass("cuselOptHover");jQuery(this).find(".cuselText").eq(0).text(g)}if(o==13){var f=jQuery(this).find(".cuselOptHover").eq(0);if(f.is("span")){jQuery(this).find(".cuselActive").removeClass("cuselActive");var n=f.prop("value");f.addClass("cuselActive")}else{var n=jQuery(this).find(".cuselActive").prop("value")}jQuery(this).find(".cusel-scroll-wrap").eq(0).css("display","none").end().find(".cuselOptHover").eq(0).removeClass("cuselOptHover");jQuery(this).find("input").eq(0).val(n).change();jQuery(this).find("input").eq(0).trigger("change")}if(jQuery.browser.opera){return false}});var b=[];jQuery(".cusel").keypress(function(i){var f,h;if(window.event){f=window.event.keyCode}else{if(i){f=i.which}}if(f==null||f==0||f==9){return true}if(jQuery(this).prop("class").indexOf("classDisCusel")!=-1){return false}var k=this;b.push(i);clearTimeout(jQuery.data(this,"timer"));var j=setTimeout(function(){g()},500);jQuery(this).data("timer",j);function g(){var r=[];for(var q in b){if(window.event){r[q]=b[q].keyCode}else{if(b[q]){r[q]=b[q].which}}r[q]=String.fromCharCode(r[q]).toUpperCase()}var l=jQuery(k).find("span"),o=l.length,s,p;for(s=0;s<o;s++){var t=true;for(var v in b){p=l.eq(s).text().charAt(v).toUpperCase();if(p!=r[v]){t=false}}if(t){jQuery(k).find(".cuselOptHover").removeClass("cuselOptHover").end().find("span").eq(s).addClass("cuselOptHover").end().end().find(".cuselText").eq(0).text(l.eq(s).text());var n=jQuery(k).find(".cusel-scroll-pane").eq(0);if(n.parent().find(".jScrollPaneTrack").eq(0).is("div")){var u=n.prop("id"),m=n.find("span").eq(0).outerHeight()-0.2;jQuery("#"+u)[0].scrollTo(m*s)}b=b.splice;b=[];break;return true}}b=b.splice;b=[]}if(jQuery.browser.opera&&window.event.keyCode!=9){return false}});jQuery(".cusel span").mouseover(function(){jQuery(this).parent().find(".cuselOptHover").eq(0).removeClass("cuselOptHover")});var c=jQuery(".cusel"),e=c.length-1,d;for(d=0;d<=e;d++){c.eq(d).css("z-index",e-d)}})}function cuSelRefresh(g){var d=g.refreshEl.split(","),b=d.length,e;for(e=0;e<b;e++){var c=jQuery(d[e]).parents(".cusel").find(".cusel-scroll-wrap").eq(0);c.find(".cusel-scroll-pane").jScrollPaneRemoveCusel();c.css({visibility:"hidden",display:"block"});var a=c.find("span"),f=a.eq(0).outerHeight();if(a.length>g.visRows){c.css({height:f*g.visRows+"px",display:"none",visibility:"visible"}).children(".cusel-scroll-pane").css("height",f*g.visRows+"px")}else{c.css({display:"none",visibility:"visible"})}}}(function(a){a.jScrollPaneCusel={active:[]};a.fn.jScrollPaneCusel=function(c){c=a.extend({},a.fn.jScrollPaneCusel.defaults,c);var b=function(){return false};return this.each(function(){var q=a(this);var L=this.parentNode.offsetWidth;q.css("overflow","hidden");var z=this;if(a(this).parent().is(".jScrollPaneContainer")){var ae=c.maintainPosition?q.position().top:0;var m=a(this).parent();var F=L;var af=m.outerHeight();var n=af;a(">.jScrollPaneTrack, >.jScrollArrowUp, >.jScrollArrowDown",m).remove();q.css({top:0})}else{var ae=0;this.originalPadding=q.css("paddingTop")+" "+q.css("paddingRight")+" "+q.css("paddingBottom")+" "+q.css("paddingLeft");this.originalSidePaddingTotal=(parseInt(q.css("paddingLeft"))||0)+(parseInt(q.css("paddingRight"))||0);var F=L;var af=q.innerHeight();var n=af;q.wrap("<div class='jScrollPaneContainer'></div>").parent().css({height:af+"px",width:F+"px"});if(!window.navigator.userProfile){var g=parseInt(a(this).parent().css("border-left-width"))+parseInt(a(this).parent().css("border-right-width"));F-=g;a(this).css("width",F+"px").parent().css("width",F+"px")}a(document).bind("emchange",function(ag,ah,p){q.jScrollPaneCusel(c)})}if(c.reinitialiseOnImageLoad){var o=a.data(z,"jScrollPaneImagesToLoad")||a("img",q);var h=[];if(o.length){o.each(function(p,ag){a(this).bind("load",function(){if(a.inArray(p,h)==-1){h.push(ag);o=a.grep(o,function(ai,ah){return ai!=ag});a.data(z,"jScrollPaneImagesToLoad",o);c.reinitialiseOnImageLoad=false;q.jScrollPaneCusel(c)}}).each(function(ah,ai){if(this.complete||this.complete===undefined){this.src=this.src}})})}}var R=this.originalSidePaddingTotal;var O={height:"auto",width:F-c.scrollbarWidth-c.scrollbarMargin-R+"px"};if(c.scrollbarOnLeft){O.paddingLeft=c.scrollbarMargin+c.scrollbarWidth+"px"}else{O.paddingRight=c.scrollbarMargin+"px"}q.css(O);var P=q.outerHeight();var K=af/P;if(K<0.99){var i=q.parent();i.append(a('<div class="jScrollPaneTrack"></div>').css({width:c.scrollbarWidth+"px"}).append(a('<div class="jScrollPaneDrag"></div>').css({width:c.scrollbarWidth+"px"}).append(a('<div class="jScrollPaneDragTop"></div>').css({width:c.scrollbarWidth+"px"}),a('<div class="jScrollPaneDragBottom"></div>').css({width:c.scrollbarWidth+"px"}))));var ab=a(">.jScrollPaneTrack",i);var r=a(">.jScrollPaneTrack .jScrollPaneDrag",i);if(c.showArrows){var I;var ad;var u;var T;var M=function(){if(T>4||T%4==0){aa(X+ad*D)}T++};var l=function(p){a("html").unbind("mouseup",l);I.removeClass("jScrollActiveArrowButton");clearInterval(u)};var B=function(){a("html").bind("mouseup",l);I.addClass("jScrollActiveArrowButton");T=0;M();u=setInterval(M,100)};i.append(a("<div></div>").attr({"class":"jScrollArrowUp"}).css({width:c.scrollbarWidth+"px"}).bind("mousedown",function(){I=a(this);ad=-1;B();this.blur();return false}).bind("click",b),a("<div></div>").attr({"class":"jScrollArrowDown"}).css({width:c.scrollbarWidth+"px"}).bind("mousedown",function(){I=a(this);ad=1;B();this.blur();return false}).bind("click",b));var s=a(">.jScrollArrowUp",i);var k=a(">.jScrollArrowDown",i);if(c.arrowSize){n=af-c.arrowSize-c.arrowSize;ab.css({height:n+"px",top:c.arrowSize+"px"})}else{var U=s.height();c.arrowSize=U;n=af-U-k.height();ab.css({height:n+"px",top:U+"px"})}}var Y=a(this).css({position:"absolute",overflow:"visible"});var d;var A;var D;var X=0;var x=K*af/2;var C=function(ag,ai){var ah=ai=="X"?"Left":"Top";return ag["page"+ai]||(ag["client"+ai]+(document.documentElement["scroll"+ah]||document.body["scroll"+ah]))||0};var H=function(){return false};var W=function(){Q();d=r.offset(false);d.top-=X;A=n-r[0].offsetHeight;D=2*c.wheelSpeed*A/P};var e=function(p){W();x=C(p,"Y")-X-d.top;a("html").bind("mouseup",v).bind("mousemove",J);if(a.browser.msie){a("html").bind("dragstart",H).bind("selectstart",H)}return false};var v=function(){a("html").unbind("mouseup",v).unbind("mousemove",J);x=K*af/2;if(a.browser.msie){a("html").unbind("dragstart",H).unbind("selectstart",H)}};var aa=function(ag){ag=ag<0?0:(ag>A?A:ag);X=ag;r.css({top:ag+"px"});var ah=ag/A;Y.css({top:((af-P)*ah)+"px"});q.trigger("scroll");if(c.showArrows){s[ag==0?"addClass":"removeClass"]("disabled");k[ag==A?"addClass":"removeClass"]("disabled")}};var J=function(p){aa(C(p,"Y")-d.top-x)};var S=Math.max(Math.min(K*(af-c.arrowSize*2),c.dragMaxHeight),c.dragMinHeight);r.css({height:S+"px"}).bind("mousedown",e);var N;var t;var j;var V=function(){if(t>8||t%4==0){aa((X-((X-j)/2)))}t++};var ac=function(){clearInterval(N);a("html").unbind("mouseup",ac).unbind("mousemove",G)};var G=function(p){j=C(p,"Y")-d.top-x};var w=function(p){W();G(p);t=0;a("html").bind("mouseup",ac).bind("mousemove",G);N=setInterval(V,100);V()};ab.bind("mousedown",w);i.bind("mousewheel",function(ag,ai){W();Q();var ah=X;aa(X-ai*D);var p=ah!=X;return false});var f;var y;function E(){var p=(f-X)/c.animateStep;if(p>1||p<-1){aa(X+p)}else{aa(f);Q()}}var Q=function(){if(y){clearInterval(y);delete f}};var Z=function(ah,p){if(typeof ah=="string"){$e=a(ah,q);if(!$e.length){return}ah=$e.offset().top-q.offset().top}i.scrollTop(0);Q();var ag=-ah/(af-P)*A;if(p||!c.animateTo){aa(ag)}else{f=ag;y=setInterval(E,c.animateInterval)}};q[0].scrollTo=Z;q[0].scrollBy=function(ag){var p=-parseInt(Y.css("top"))||0;Z(p+ag)};W();Z(-ae,true);a("*",this).bind("focus",function(aj){var ai=a(this);var al=0;while(ai[0]!=q[0]){al+=ai.position().top;ai=ai.offsetParent()}var p=-parseInt(Y.css("top"))||0;var ak=p+af;var ah=al>p&&al<ak;if(!ah){var ag=al-c.scrollbarMargin;if(al>p){ag+=a(this).height()+15+c.scrollbarMargin-af}Z(ag)}});if(location.hash){Z(location.hash)}a(document).bind("click",function(ag){$target=a(ag.target);if($target.is("a")){var p=$target.attr("href");if(p.substr(0,1)=="#"){Z(p)}}});a.jScrollPaneCusel.active.push(q[0])}else{q.css({height:af+"px",width:F-this.originalSidePaddingTotal+"px",padding:this.originalPadding});q.parent().unbind("mousewheel")}})};a.fn.jScrollPaneRemoveCusel=function(){a(this).each(function(){$this=a(this);var b=$this.parent();if(b.is(".jScrollPaneContainer")){$this.css({top:"",height:"",width:"",padding:"",overflow:"",position:""});$this.attr("style",$this.data("originalStyleTag"));b.after($this).remove()}})};a.fn.jScrollPaneCusel.defaults={scrollbarWidth:10,scrollbarMargin:5,wheelSpeed:18,showArrows:false,arrowSize:0,animateTo:false,dragMinHeight:1,dragMaxHeight:99999,animateInterval:100,animateStep:3,maintainPosition:true,scrollbarOnLeft:false,reinitialiseOnImageLoad:false};a(window).bind("unload",function(){var c=a.jScrollPaneCusel.active;for(var b=0;b<c.length;b++){c[b].scrollTo=c[b].scrollBy=null}})})(jQuery);(function(a){a.event.special.mousewheel={setup:function(){var b=a.event.special.mousewheel.handler;if(a.browser.mozilla){a(this).bind("mousemove.mousewheel",function(c){a.data(this,"mwcursorposdata",{pageX:c.pageX,pageY:c.pageY,clientX:c.clientX,clientY:c.clientY})})}if(this.addEventListener){this.addEventListener((a.browser.mozilla?"DOMMouseScroll":"mousewheel"),b,false)}else{this.onmousewheel=b}},teardown:function(){var b=a.event.special.mousewheel.handler;a(this).unbind("mousemove.mousewheel");if(this.removeEventListener){this.removeEventListener((a.browser.mozilla?"DOMMouseScroll":"mousewheel"),b,false)}else{this.onmousewheel=function(){}}a.removeData(this,"mwcursorposdata")},handler:function(d){var b=Array.prototype.slice.call(arguments,1);d=a.event.fix(d||window.event);a.extend(d,a.data(this,"mwcursorposdata")||{});var e=0,c=true;if(d.wheelDelta){e=d.wheelDelta/120}if(d.detail){e=-d.detail/3}d.data=d.data||{};d.type="mousewheel";b.unshift(e);b.unshift(d);return a.event.handle.apply(this,b)}};a.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})})(jQuery);
